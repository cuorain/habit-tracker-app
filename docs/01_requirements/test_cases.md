# テストケース（たたき台）

## 概要
主要なユーザーストーリーに基づいたテストケースのたたき台です。手動テストを想定しています。

## 1. ユーザー登録・ログイン

### TC-001: ユーザー登録成功
- **目的**: 有効なユーザー名とパスワードで登録できることを確認する。
- **前提条件**: なし。
- **手順**:
  1. 新規登録画面にアクセスする。
  2. 有効なユーザー名を入力する。
  3. 有効なパスワードを入力する。
  4. 確認用パスワードに手順3と同じパスワードを入力する。
  5. 「登録」ボタンをクリックする。
- **期待結果**: 
  1. 登録が成功し、自動的にログイン状態になる、またはログイン画面にリダイレクトされる。
  2. ユーザー名がシステムに登録されていることを確認できる。

### TC-002: ユーザー登録失敗（ユーザー名重複）
- **目的**: 既存のユーザー名では登録できないことを確認する。
- **前提条件**: ユーザー「testuser」が既に登録されている。
- **手順**:
  1. 新規登録画面にアクセスする。
  2. 既存のユーザー名「testuser」を入力する。
  3. 有効なパスワードを入力する。
  4. 確認用パスワードに手順3と同じパスワードを入力する。
  5. 「登録」ボタンをクリックする。
- **期待結果**: 
  1. 「ユーザー名は既に使用されています。」というエラーメッセージが表示され、登録が失敗する。
  2. ユーザーはログイン状態にならない。

### TC-003: ログイン成功
- **目的**: 登録済みのユーザー名とパスワードでログインできることを確認する。
- **前提条件**: ユーザー「testuser」がパスワード「password」で登録されている。
- **手順**:
  1. ログイン画面にアクセスする。
  2. ユーザー名「testuser」を入力する。
  3. パスワード「password」を入力する。
  4. 「ログイン」ボタンをクリックする。
- **期待結果**: 
  1. ログインが成功し、ダッシュボード画面に遷移する。

### TC-004: ログイン失敗（パスワード不一致）
- **目的**: 無効なパスワードではログインできないことを確認する。
- **前提条件**: ユーザー「testuser」がパスワード「password」で登録されている。
- **手順**:
  1. ログイン画面にアクセスする。
  2. ユーザー名「testuser」を入力する。
  3. 無効なパスワード（例: 「wrongpassword」）を入力する。
  4. 「ログイン」ボタンをクリックする。
- **期待結果**: 
  1. 「無効なユーザー名またはパスワードです。」というエラーメッセージが表示され、ログインが失敗する。
  2. ユーザーはダッシュボード画面に遷移しない。

## 2. 習慣の作成

### TC-005: 新規習慣作成成功（BOOLEANタイプ）
- **目的**: 新しいBOOLEANタイプの習慣を作成できることを確認する。
- **前提条件**: ユーザーがログイン済みである。
- **手順**:
  1. ダッシュボード画面から「新規習慣追加」ボタンをクリックする。
  2. 習慣名を入力する。
  3. 説明を入力する（任意）。
  4. カテゴリを選択または新規作成する。
  5. 習慣タイプを「BOOLEAN」に設定する。
  6. 目標頻度を設定する。
  7. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 習慣が正常に作成され、ダッシュボードの習慣一覧に表示される。
  2. 習慣詳細画面で、入力した情報が正しく表示される。

### TC-006: 新規習慣作成成功（NUMERIC_DURATIONタイプ）
- **目的**: 新しいNUMERIC_DURATIONタイプの習慣を作成できることを確認する。
- **前提条件**: ユーザーがログイン済みである。
- **手順**:
  1. ダッシュボード画面から「新規習慣追加」ボタンをクリックする。
  2. 習慣名を入力する。
  3. 説明を入力する（任意）。
  4. カテゴリを選択または新規作成する。
  5. 習慣タイプを「NUMERIC_DURATION」に設定する。
  6. 目標値を入力する（例: 8）。
  7. 単位を選択する（例: hours）。
  8. 目標頻度を設定する。
  9. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 習慣が正常に作成され、ダッシュボードの習慣一覧に表示される。
  2. 習慣詳細画面で、入力した情報が正しく表示される。

### TC-007: 新規習慣作成成功（NUMERIC_COUNTタイプ）
- **目的**: 新しいNUMERIC_COUNTタイプの習慣を作成できることを確認する。
- **前提条件**: ユーザーがログイン済みである。
- **手順**:
  1. ダッシュボード画面から「新規習慣追加」ボタンをクリックする。
  2. 習慣名を入力する。
  3. 説明を入力する（任意）。
  4. カテゴリを選択または新規作成する。
  5. 習慣タイプを「NUMERIC_COUNT」に設定する。
  6. 目標値を入力する（例: 30）。
  7. 単位を選択する（例: reps）。
  8. 目標頻度を設定する。
  9. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 習慣が正常に作成され、ダッシュボードの習慣一覧に表示される。
  2. 習慣詳細画面で、入力した情報が正しく表示される。

## 3. 習慣の記録

### TC-008: 進捗記録成功（BOOLEANタイプ）
- **目的**: BOOLEANタイプの習慣の進捗を記録できることを確認する。
- **前提条件**: ユーザーがログイン済みで、BOOLEANタイプの習慣が登録されている。
- **手順**:
  1. ダッシュボードまたは習慣詳細画面で、対象のBOOLEAN習慣の「完了」ボタン（またはチェックボックス）をクリックする。
  2. 必要に応じてメモを入力する。
- **期待結果**: 
  1. 進捗が記録され、完了状態が反映される。
  2. グラフやカレンダー表示に進捗が反映される。

### TC-009: 進捗記録成功（NUMERICタイプ）
- **目的**: 数値タイプの習慣の進捗を記録できることを確認する。
- **前提条件**: ユーザーがログイン済みで、NUMERICタイプの習慣が登録されている。
- **手順**:
  1. ダッシュボードまたは習慣詳細画面で、対象のNUMERIC習慣の進捗記録UIにアクセスする。
  2. 適切な`numericValue`を入力する（例: 睡眠時間なら7.5時間）。
  3. 必要に応じてメモを入力する。
  4. 「記録」ボタンをクリックする。
- **期待結果**: 
  1. 進捗が記録され、入力した`numericValue`が反映される。
  2. 目標達成度に応じて完了状態が自動で判定され、グラフやカレンダー表示に進捗が反映される。

### TC-010: 進捗記録変更成功（NUMERICタイプ）
- **目的**: 数値タイプの習慣の進捗記録を変更できることを確認する。
- **前提条件**: ユーザーがログイン済みで、NUMERICタイプの習慣に過去の進捗記録がある。
- **手順**:
  1. 習慣詳細画面で、過去の進捗記録にアクセスする。
  2. `numericValue`を別の値に変更する（例: 腕立て回数を20回から30回に変更）。
  3. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 進捗記録が更新され、新しい`numericValue`が反映される。
  2. グラフやカレンダー表示に進捗が正しく反映される。

### TC-011: 進捗記録変更成功（BOOLEANタイプ）
- **目的**: BOOLEANタイプの習慣の進捗記録（完了状態）を変更できることを確認する。
- **前提条件**: ユーザーがログイン済みで、BOOLEANタイプの習慣に過去の進捗記録がある。
- **手順**:
  1. 習慣詳細画面で、過去の進捗記録にアクセスする。
  2. 完了状態を「未完了」から「完了」、または「完了」から「未完了」に切り替える。
  3. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 進捗記録の完了状態が更新され、正しく反映される。
  2. グラフやカレンダー表示に進捗が正しく反映される。

## 4. 習慣の取得

### TC-016: 習慣一覧取得成功（登録済み習慣がある場合）
- **目的**: ログイン済みユーザーが自身の登録済み習慣一覧を正常に取得できることを確認する。
- **前提条件**: ユーザーがログイン済みで、少なくとも1つ以上の習慣が登録されている。
- **手順**:
  1. ログイン後、ダッシュボードまたは習慣一覧画面にアクセスする。
  2. （APIレベルでのテストの場合）`GET /api/v1/habits` エンドポイントに認証トークンを付与してリクエストを送信する。
- **期待結果**:
  1. 登録されている習慣が一覧として表示される。
  2. 各習慣には `id`, `name`, `description`, `category`, `habitType`, `targetValue`, `targetUnit`, `targetFrequency`, `createdAt`, `updatedAt` などの情報が含まれていることを確認する。
  3. 他のユーザーの習慣は含まれていないことを確認する。

### TC-017: 習慣一覧取得成功（登録済み習慣がない場合）
- **目的**: ログイン済みユーザーが登録済み習慣がない場合に空の習慣一覧を正常に取得できることを確認する。
- **前提条件**: ユーザーがログイン済みで、習慣が一つも登録されていない。
- **手順**:
  1. ログイン後、ダッシュボードまたは習慣一覧画面にアクセスする。
  2. （APIレベルでのテストの場合）`GET /api/v1/habits` エンドポイントに認証トークンを付与してリクエストを送信する。
- **期待結果**:
  1. 習慣一覧が空として表示される（または「習慣がありません」のようなメッセージが表示される）。
  2. （APIレベルでのテストの場合）空の配列 `[]` が返されることを確認する。

### TC-018: 習慣一覧取得失敗（未認証）
- **目的**: 未認証のユーザーが習慣一覧を取得しようとした場合にエラーが返されることを確認する。
- **前提条件**: なし。
- **手順**:
  1. `GET /api/v1/habits` エンドポイントに認証トークンなしでリクエストを送信する。
- **期待結果**:
  1. `401 Unauthorized` または `403 Forbidden` のHTTPステータスコードが返される。
  2. 「認証トークンが提供されていません。」または「無効な認証トークンです。」のようなエラーメッセージが含まれていることを確認する。

## 4. 進捗の可視化

### TC-012: 進捗グラフ表示
- **目的**: 習慣の進捗がグラフで正しく表示されることを確認する。
- **前提条件**: ユーザーがログイン済みで、進捗記録のある習慣が登録されている。
- **手順**:
  1. 習慣詳細画面にアクセスする。
  2. 期間選択（週、月、年）を変更する。
- **期待結果**: 
  1. 選択された期間に応じた進捗グラフが正しく描画される。
  2. 数値習慣の場合、`numericValue`がグラフに反映され、目標値との比較が表示される。

### TC-013: 週次/月次サマリー表示
- **目的**: 週次/月次サマリーが正しく表示されることを確認する。
- **前提条件**: ユーザーがログイン済みで、複数の習慣と進捗記録がある。
- **手順**:
  1. ダッシュボード画面またはレポート画面にアクセスする。
- **期待結果**: 
  1. 各習慣の週次/月次サマリー（目標達成度、合計時間/回数など）が適切に集計され、表示される。

## 5. 習慣の管理

### TC-014: 習慣編集成功
- **目的**: 習慣の情報を編集できることを確認する。
- **前提条件**: ユーザーがログイン済みで、習慣が登録されている。
- **手順**:
  1. 習慣詳細画面から「編集」ボタンをクリックする。
  2. 習慣名、説明、カテゴリ、習慣タイプ、目標値、単位、目標頻度などの項目を変更する。
  3. 「保存」ボタンをクリックする。
- **期待結果**: 
  1. 習慣情報が更新され、詳細画面や一覧画面に正しく反映される。

### TC-015: 習慣削除成功
- **目的**: 習慣を削除できることを確認する。
- **前提条件**: ユーザーがログイン済みで、習慣が登録されている。
- **手順**:
  1. 習慣詳細画面から「削除」ボタンをクリックする。
  2. 確認ダイアログが表示された場合、「はい」を選択する。
- **期待結果**: 
  1. 習慣が削除され、習慣一覧から消える。
  2. 関連する進捗記録も削除されていることを確認できる（データベースで確認）。